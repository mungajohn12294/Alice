<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alice's Valentine's Wonderland üíï</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #ff9a9e 0%, #fad0c4 100%);
            min-height: 100vh;
            overflow-x: hidden;
            position: relative;
        }

        /* Floating Hearts Background */
        .floating-hearts {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 1;
        }

        .heart-float {
            position: absolute;
            font-size: 20px;
            opacity: 0.6;
            animation: float 6s infinite;
            color: #ff3366;
        }

        @keyframes float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0.6;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Main Container */
        .container {
            position: relative;
            z-index: 2;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header Section */
        .header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 60px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            animation: slideDown 1s ease-out;
        }

        @keyframes slideDown {
            from {
                transform: translateY(-100px);
                opacity: 0;
            }
            to {
                transform: translateY(0);
                opacity: 1;
            }
        }

        h1 {
            font-size: 4em;
            color: #fff;
            text-shadow: 3px 3px 10px rgba(255, 51, 102, 0.5);
            margin-bottom: 20px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from {
                text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #ff3366;
            }
            to {
                text-shadow: 0 0 20px #fff, 0 0 30px #ff3366, 0 0 40px #ff3366;
            }
        }

        .subtitle {
            font-size: 1.5em;
            color: #fff;
            margin-bottom: 30px;
        }

        /* Love Meter Section */
        .love-meter-section {
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 30px;
            margin-bottom: 30px;
            text-align: center;
        }

        .love-meter {
            width: 100%;
            height: 50px;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 30px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
            cursor: pointer;
        }

        .love-meter-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff3366, #ff6b6b);
            transition: width 2s cubic-bezier(0.68, -0.55, 0.265, 1.55);
            border-radius: 30px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 20px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }

        .love-percentage {
            font-size: 2em;
            color: #fff;
            margin-top: 10px;
        }

        /* Games Grid */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-bottom: 40px;
        }

        .game-card {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 30px;
            box-shadow: 0 20px 30px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .game-card:hover {
            transform: translateY(-10px) scale(1.02);
            box-shadow: 0 30px 40px rgba(255, 51, 102, 0.3);
            border-color: #ff3366;
        }

        .game-title {
            font-size: 2em;
            color: #fff;
            margin-bottom: 20px;
            text-align: center;
        }

        /* Memory Game */
        .memory-game {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin: 20px 0;
        }

        .memory-card {
            aspect-ratio: 1;
            background: linear-gradient(145deg, #ff3366, #ff6b6b);
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.3s ease;
            color: white;
            transform-style: preserve-3d;
            position: relative;
        }

        .memory-card.flipped {
            background: white;
            color: #ff3366;
            transform: rotateY(180deg);
        }

        .memory-card.matched {
            background: #4caf50;
            color: white;
            cursor: default;
            animation: bounce 0.5s ease;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Matching Game */
        .matching-pairs {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .pair-item {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2em;
            color: #fff;
            border: 2px solid transparent;
        }

        .pair-item.selected {
            background: #ff3366;
            transform: scale(1.05);
            border-color: white;
        }

        .pair-item.matched {
            background: #4caf50;
            cursor: default;
            opacity: 0.7;
        }

        /* Love Calculator */
        .love-calculator {
            text-align: center;
        }

        .calculator-input {
            display: flex;
            gap: 10px;
            margin: 20px 0;
        }

        .calc-input {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 30px;
            font-size: 1em;
            background: rgba(255, 255, 255, 0.3);
            color: #fff;
            border: 2px solid transparent;
        }

        .calc-input:focus {
            outline: none;
            border-color: #ff3366;
        }

        .calc-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        .calc-button {
            padding: 15px 30px;
            background: #ff3366;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .calc-button:hover {
            background: #ff6b6b;
            transform: scale(1.05);
        }

        .love-result {
            font-size: 2em;
            color: #fff;
            margin-top: 20px;
            min-height: 60px;
        }

        /* Whack-A-Heart Game */
        .whack-game {
            position: relative;
            height: 300px;
            background: rgba(0, 0, 0, 0.1);
            border-radius: 30px;
            overflow: hidden;
        }

        .whack-heart {
            position: absolute;
            font-size: 2em;
            cursor: pointer;
            transition: all 0.2s ease;
            animation: popUp 1s ease-out forwards;
        }

        .whack-heart:hover {
            transform: scale(1.2);
        }

        @keyframes popUp {
            0% {
                transform: scale(0);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
                opacity: 1;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .game-stats {
            display: flex;
            justify-content: space-around;
            margin: 20px 0;
            color: #fff;
            font-size: 1.2em;
        }

        /* Message Wall */
        .message-wall {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 40px;
            padding: 30px;
            margin: 40px 0;
        }

        .messages {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .message {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 20px;
            color: #fff;
            animation: fadeInUp 0.5s ease-out;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .message:hover {
            transform: translateY(-5px);
            border-color: #ff3366;
        }

        .message-input {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .message-field {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 30px;
            font-size: 1em;
            background: rgba(255, 255, 255, 0.3);
            color: #fff;
        }

        .send-message {
            padding: 15px 30px;
            background: #ff3366;
            color: white;
            border: none;
            border-radius: 30px;
            cursor: pointer;
        }

        /* Photo Gallery */
        .photo-gallery {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin: 30px 0;
        }

        .photo {
            aspect-ratio: 1;
            background: linear-gradient(135deg, #ff3366, #ff9a9e);
            border-radius: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            color: white;
            transition: all 0.5s ease;
            cursor: pointer;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .photo:hover {
            transform: rotate(5deg) scale(1.1);
            border-color: white;
            box-shadow: 0 20px 30px rgba(255, 51, 102, 0.5);
        }

        /* Timeline */
        .timeline {
            position: relative;
            padding: 40px 0;
        }

        .timeline::before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, transparent, #ff3366, transparent);
        }

        .timeline-item {
            position: relative;
            width: 50%;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            margin-bottom: 30px;
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .timeline-item:nth-child(odd) {
            left: 0;
        }

        .timeline-item:nth-child(even) {
            left: 50%;
        }

        .timeline-item::before {
            content: '‚ù§Ô∏è';
            position: absolute;
            top: 50%;
            width: 40px;
            height: 40px;
            background: #ff3366;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
        }

        .timeline-item:nth-child(odd)::before {
            right: -60px;
        }

        .timeline-item:nth-child(even)::before {
            left: -60px;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            overflow: hidden;
            margin: 20px 0;
            position: relative;
        }

        .progress-fill {
            height: 100%;
            width: 0%;
            background: linear-gradient(90deg, #ff3366, #ff9a9e);
            transition: width 1s ease;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 15px;
            color: white;
            font-weight: bold;
            text-shadow: 1px 1px 2px black;
        }

        /* Achievements */
        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .achievement {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 30px;
            color: #fff;
            border: 2px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .achievement.unlocked {
            background: linear-gradient(135deg, #ff3366, #ff9a9e);
            border-color: white;
            transform: scale(1.05);
        }

        .achievement-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        /* Confetti Canvas */
        #confetti-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 9999;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            h1 {
                font-size: 2.5em;
            }
            
            .games-grid {
                grid-template-columns: 1fr;
            }
            
            .timeline::before {
                left: 30px;
            }
            
            .timeline-item {
                width: calc(100% - 60px);
                left: 60px !important;
            }
            
            .timeline-item::before {
                left: -40px !important;
            }
        }
    </style>
</head>
<body>
    <canvas id="confetti-canvas"></canvas>
    
    <div class="floating-hearts" id="floating-hearts"></div>
    
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>üíï Alice's Valentine Wonderland üíï</h1>
            <p class="subtitle">A Magical Journey of Love, Laughter, and Endless Joy</p>
        </div>

        <!-- Love Meter -->
        <div class="love-meter-section">
            <h2 style="color: #fff; margin-bottom: 20px;">Our Love Meter ‚ù§Ô∏è</h2>
            <div class="love-meter" onclick="increaseLove()">
                <div class="love-meter-fill" id="loveMeterFill">Click to add love!</div>
            </div>
            <div class="love-percentage" id="lovePercentage">0% Love</div>
        </div>

        <!-- Games Grid -->
        <div class="games-grid">
            <!-- Memory Game -->
            <div class="game-card">
                <h2 class="game-title">üíù Heart Memory Game</h2>
                <p style="color: #fff; margin-bottom: 20px;">Match the hearts to win!</p>
                <div class="memory-game" id="memoryGame"></div>
                <div style="display: flex; justify-content: space-between; margin-top: 20px;">
                    <span style="color: #fff;">Moves: <span id="moves">0</span></span>
                    <span style="color: #fff;">Pairs: <span id="pairs">0</span>/6</span>
                    <button class="calc-button" onclick="resetMemoryGame()">üîÑ New Game</button>
                </div>
            </div>

            <!-- Matching Pairs Game -->
            <div class="game-card">
                <h2 class="game-title">üíï Love Match</h2>
                <p style="color: #fff; margin-bottom: 20px;">Match the loving pairs!</p>
                <div class="matching-pairs" id="matchingPairs"></div>
                <div style="text-align: center; margin-top: 20px;">
                    <span style="color: #fff;">Matches: <span id="pairMatches">0</span>/4</span>
                </div>
            </div>

            <!-- Love Calculator -->
            <div class="game-card">
                <h2 class="game-title">üíò Love Calculator</h2>
                <div class="love-calculator">
                    <div class="calculator-input">
                        <input type="text" class="calc-input" id="name1" placeholder="Your name" value="Alice">
                        <input type="text" class="calc-input" id="name2" placeholder="Their name" value="You">
                    </div>
                    <button class="calc-button" onclick="calculateLove()">Calculate Love üíï</button>
                    <div class="love-result" id="loveResult"></div>
                </div>
            </div>

            <!-- Whack-A-Heart Game -->
            <div class="game-card">
                <h2 class="game-title">üéØ Whack-A-Heart</h2>
                <div class="game-stats">
                    <span>Score: <span id="whackScore">0</span></span>
                    <span>Time: <span id="whackTime">30</span>s</span>
                </div>
                <div class="whack-game" id="whackGame" onclick="whackHeart(event)"></div>
                <button class="calc-button" onclick="startWhackGame()" style="margin-top: 20px; width: 100%;">Start Game</button>
            </div>
        </div>

        <!-- Message Wall -->
        <div class="message-wall">
            <h2 style="color: #fff; margin-bottom: 20px; text-align: center;">üíå Love Message Wall</h2>
            <div class="messages" id="messageWall"></div>
            <div class="message-input">
                <input type="text" class="message-field" id="newMessage" placeholder="Write a sweet message for Alice...">
                <button class="send-message" onclick="addMessage()">Send ‚ù§Ô∏è</button>
            </div>
        </div>

        <!-- Photo Gallery -->
        <div class="game-card">
            <h2 class="game-title">üì∏ Our Memory Gallery</h2>
            <div class="photo-gallery">
                <div class="photo" onclick="revealMemory(0)">üíï</div>
                <div class="photo" onclick="revealMemory(1)">üíñ</div>
                <div class="photo" onclick="revealMemory(2)">üíù</div>
                <div class="photo" onclick="revealMemory(3)">üíó</div>
                <div class="photo" onclick="revealMemory(4)">üíì</div>
                <div class="photo" onclick="revealMemory(5)">üíû</div>
            </div>
        </div>

        <!-- Love Timeline -->
        <div class="game-card">
            <h2 class="game-title">‚è∞ Our Love Story Timeline</h2>
            <div class="timeline">
                <div class="timeline-item">
                    <h3>First Meeting</h3>
                    <p>The moment our eyes met, the world stopped.</p>
                </div>
                <div class="timeline-item">
                    <h3>First Date</h3>
                    <p>Laughter, butterflies, and perfect moments.</p>
                </div>
                <div class="timeline-item">
                    <h3>First Kiss</h3>
                    <p>Fireworks exploded in the sky.</p>
                </div>
                <div class="timeline-item">
                    <h3>Today</h3>
                    <p>More in love than ever before!</p>
                </div>
            </div>
        </div>

        <!-- Achievements -->
        <div class="game-card">
            <h2 class="game-title">üèÜ Love Achievements</h2>
            <div class="achievements-grid" id="achievements">
                <div class="achievement" id="achievement1" onclick="unlockAchievement(1)">
                    <div class="achievement-icon">üíï</div>
                    <div>First Game</div>
                </div>
                <div class="achievement" id="achievement2" onclick="unlockAchievement(2)">
                    <div class="achievement-icon">üíñ</div>
                    <div>Perfect Match</div>
                </div>
                <div class="achievement" id="achievement3" onclick="unlockAchievement(3)">
                    <div class="achievement-icon">üíò</div>
                    <div>Heart Collector</div>
                </div>
                <div class="achievement" id="achievement4" onclick="unlockAchievement(4)">
                    <div class="achievement-icon">üíù</div>
                    <div>Message Master</div>
                </div>
            </div>
        </div>

        <!-- Progress Bar -->
        <div class="game-card">
            <h2 class="game-title">üéØ Valentine's Quest</h2>
            <div class="progress-bar">
                <div class="progress-fill" id="questProgress">0%</div>
            </div>
            <div style="display: flex; justify-content: space-around; color: #fff; margin-top: 20px;">
                <span>‚ù§Ô∏è Play Games</span>
                <span>üíå Send Messages</span>
                <span>üéÅ Unlock Surprises</span>
            </div>
        </div>

        <!-- Interactive Button -->
        <div style="text-align: center; margin: 40px 0;">
            <button class="calc-button" style="font-size: 1.5em; padding: 20px 60px;" onclick="grandSurprise()">
                Click for Grand Surprise! üéâ
            </button>
        </div>
    </div>

    <script>
        // Global Variables
        let loveMeterValue = 0;
        let memoryCards = [];
        let flippedCards = [];
        let moves = 0;
        let matchedPairs = 0;
        let pairMatches = 0;
        let whackScore = 0;
        let whackTimer = 30;
        let whackGameActive = false;
        let whackInterval;
        let achievements = [false, false, false, false];
        let questProgress = 0;

        // Floating Hearts Background
        function createFloatingHearts() {
            const heartsContainer = document.getElementById('floating-hearts');
            for (let i = 0; i < 50; i++) {
                const heart = document.createElement('div');
                heart.className = 'heart-float';
                heart.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíò', 'üíù'][Math.floor(Math.random() * 7)];
                heart.style.left = Math.random() * 100 + '%';
                heart.style.animationDelay = Math.random() * 5 + 's';
                heart.style.fontSize = (Math.random() * 30 + 10) + 'px';
                heartsContainer.appendChild(heart);
            }
        }

        // Love Meter
        function increaseLove() {
            loveMeterValue = Math.min(100, loveMeterValue + 10);
            const fill = document.getElementById('loveMeterFill');
            const percentage = document.getElementById('lovePercentage');
            
            fill.style.width = loveMeterValue + '%';
            fill.textContent = loveMeterValue + '% Love';
            percentage.textContent = loveMeterValue + '% Love';
            
            if (loveMeterValue === 100) {
                createConfetti();
                unlockAchievement(3);
            }
        }

        // Memory Game
        function initMemoryGame() {
            const symbols = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó', 'üíì', 'üíò'];
            memoryCards = [...symbols, ...symbols];
            
            // Shuffle
            for (let i = memoryCards.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [memoryCards[i], memoryCards[j]] = [memoryCards[j], memoryCards[i]];
            }
            
            renderMemoryGame();
        }

        function renderMemoryGame() {
            const game = document.getElementById('memoryGame');
            let html = '';
            
            memoryCards.forEach((card, index) => {
                html += `<div class="memory-card" onclick="flipCard(${index})" id="card-${index}">‚ùì</div>`;
            });
            
            game.innerHTML = html;
        }

        function flipCard(index) {
            if (flippedCards.length === 2) return;
            if (flippedCards.includes(index)) return;
            
            const card = document.getElementById(`card-${index}`);
            if (card.classList.contains('matched')) return;
            
            card.classList.add('flipped');
            card.textContent = memoryCards[index];
            flippedCards.push(index);
            
            if (flippedCards.length === 2) {
                moves++;
                document.getElementById('moves').textContent = moves;
                checkMatch();
            }
        }

        function checkMatch() {
            const [card1, card2] = flippedCards;
            
            if (memoryCards[card1] === memoryCards[card2]) {
                document.getElementById(`card-${card1}`).classList.add('matched');
                document.getElementById(`card-${card2}`).classList.add('matched');
                matchedPairs++;
                document.getElementById('pairs').textContent = matchedPairs;
                
                if (matchedPairs === 6) {
                    createConfetti();
                    unlockAchievement(1);
                }
                
                flippedCards = [];
            } else {
                setTimeout(() => {
                    document.getElementById(`card-${card1}`).classList.remove('flipped');
                    document.getElementById(`card-${card2}`).classList.remove('flipped');
                    document.getElementById(`card-${card1}`).textContent = '‚ùì';
                    document.getElementById(`card-${card2}`).textContent = '‚ùì';
                    flippedCards = [];
                }, 1000);
            }
        }

        function resetMemoryGame() {
            flippedCards = [];
            moves = 0;
            matchedPairs = 0;
            document.getElementById('moves').textContent = '0';
            document.getElementById('pairs').textContent = '0/6';
            initMemoryGame();
        }

        // Matching Pairs Game
        function initMatchingPairs() {
            const pairs = [
                { left: '‚ù§Ô∏è Heart', right: 'Love' },
                { left: 'üíï Couple', right: 'Together' },
                { left: 'üíñ Sparkle', right: 'Shine' },
                { left: 'üíò Cupid', right: 'Arrow' }
            ];
            
            const game = document.getElementById('matchingPairs');
            let html = '';
            
            pairs.forEach((pair, index) => {
                html += `<div class="pair-item" onclick="selectLeft(${index})" id="left-${index}">${pair.left}</div>`;
            });
            
            pairs.forEach((pair, index) => {
                html += `<div class="pair-item" onclick="selectRight(${index})" id="right-${index}">${pair.right}</div>`;
            });
            
            game.innerHTML = html;
        }

        let selectedLeft = null;
        let selectedRight = null;

        function selectLeft(index) {
            if (document.getElementById(`left-${index}`).classList.contains('matched')) return;
            
            if (selectedLeft !== null) {
                document.getElementById(`left-${selectedLeft}`).classList.remove('selected');
            }
            
            selectedLeft = index;
            document.getElementById(`left-${index}`).classList.add('selected');
            checkPair();
        }

        function selectRight(index) {
            if (document.getElementById(`right-${index}`).classList.contains('matched')) return;
            
            if (selectedRight !== null) {
                document.getElementById(`right-${selectedRight}`).classList.remove('selected');
            }
            
            selectedRight = index;
            document.getElementById(`right-${index}`).classList.add('selected');
            checkPair();
        }

        function checkPair() {
            if (selectedLeft !== null && selectedRight !== null) {
                if (selectedLeft === selectedRight) {
                    document.getElementById(`left-${selectedLeft}`).classList.add('matched');
                    document.getElementById(`right-${selectedRight}`).classList.add('matched');
                    pairMatches++;
                    document.getElementById('pairMatches').textContent = pairMatches;
                    
                    if (pairMatches === 4) {
                        createConfetti();
                        unlockAchievement(2);
                    }
                }
                
                document.getElementById(`left-${selectedLeft}`).classList.remove('selected');
                document.getElementById(`right-${selectedRight}`).classList.remove('selected');
                selectedLeft = null;
                selectedRight = null;
            }
        }

        // Love Calculator
        function calculateLove() {
            const name1 = document.getElementById('name1').value;
            const name2 = document.getElementById('name2').value;
            
            if (name1.toLowerCase().includes('alice') || name2.toLowerCase().includes('alice')) {
                document.getElementById('loveResult').innerHTML = '100% Perfect Love! ‚ù§Ô∏è';
                createConfetti();
            } else {
                const percentage = Math.floor(Math.random() * 50) + 50;
                document.getElementById('loveResult').innerHTML = `${percentage}% Compatible! üíï`;
            }
        }

        // Whack-A-Heart Game
        function startWhackGame() {
            whackScore = 0;
            whackTimer = 30;
            whackGameActive = true;
            document.getElementById('whackScore').textContent = '0';
            document.getElementById('whackTime').textContent = '30';
            
            if (whackInterval) clearInterval(whackInterval);
            
            whackInterval = setInterval(() => {
                whackTimer--;
                document.getElementById('whackTime').textContent = whackTimer;
                
                if (whackTimer <= 0) {
                    endWhackGame();
                } else {
                    addWhackHeart();
                }
            }, 1000);
            
            for (let i = 0; i < 5; i++) {
                setTimeout(addWhackHeart, i * 200);
            }
        }

        function addWhackHeart() {
            if (!whackGameActive) return;
            
            const game = document.getElementById('whackGame');
            const heart = document.createElement('div');
            heart.className = 'whack-heart';
            heart.innerHTML = ['‚ù§Ô∏è', 'üíï', 'üíñ', 'üíó'][Math.floor(Math.random() * 4)];
            heart.style.left = Math.random() * 90 + '%';
            heart.style.top = Math.random() * 80 + '%';
            heart.onclick = function(e) {
                e.stopPropagation();
                if (whackGameActive) {
                    whackScore++;
                    document.getElementById('whackScore').textContent = whackScore;
                    heart.remove();
                    
                    if (whackScore === 20) {
                        unlockAchievement(3);
                    }
                }
            };
            
            game.appendChild(heart);
            
            setTimeout(() => {
                if (heart.parentNode) {
                    heart.remove();
                }
            }, 2000);
        }

        function whackHeart(event) {
            if (event.target.classList.contains('whack-heart')) {
                // Already handled by onclick
            }
        }

        function endWhackGame() {
            whackGameActive = false;
            clearInterval(whackInterval);
            document.getElementById('whackGame').innerHTML = '';
            alert(`Game Over! You scored ${whackScore} hearts! üíï`);
        }

        // Message Wall
        function addMessage() {
            const messageInput = document.getElementById('newMessage');
            const message = messageInput.value.trim();
            
            if (message) {
                const messageWall = document.getElementById('messageWall');
                const messageDiv = document.createElement('div');
                messageDiv.className = 'message';
                messageDiv.innerHTML = `<p>üíå ${message}</p><small>Just now</small>`;
                messageWall.insertBefore(messageDiv, messageWall.firstChild);
                messageInput.value = '';
                
                unlockAchievement(4);
            }
        }

        // Photo Gallery
        const memories = [
            'Our first selfie together! üì∏',
            'That amazing dinner date! üçΩÔ∏è',
            'Sunset at the beach! üåÖ',
            'Movie night cuddles! üé¨',
            'Our silly faces! üòú',
            'Forever and always! üíï'
        ];

        function revealMemory(index) {
            alert(memories[index]);
            createConfetti();
        }

        // Achievements
        function unlockAchievement(num) {
            if (!achievements[num - 1]) {
                achievements[num - 1] = true;
                const achievement = document.getElementById(`achievement${num}`);
                achievement.classList.add('unlocked');
                createConfetti();
                
                // Update quest progress
                questProgress = achievements.filter(a => a).length * 25;
                document.getElementById('questProgress').style.width = questProgress + '%';
                document.getElementById('questProgress').textContent = questProgress + '%';
            }
        }

        // Confetti
        function createConfetti() {
            const canvas = document.getElementById('confetti-canvas');
            const ctx = canvas.getContext('2d');
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            
            const particles = [];
            for (let i = 0; i < 100; i++) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    size: Math.random() * 10 + 5,
                    speedY: Math.random() * 5 + 2,
                    speedX: (Math.random() - 0.5) * 2,
                    color: `hsl(${Math.random() * 360}, 100%, 70%)`
                });
            }
            
            function animate() {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                particles.forEach(p => {
                    ctx.fillStyle = p.color;
                    ctx.fillRect(p.x, p.y, p.size, p.size);
                    
                    p.y += p.speedY;
                    p.x += p.speedX;
                    
                    if (p.y > canvas.height) {
                        p.y = 0;
                        p.x = Math.random() * canvas.width;
                    }
                });
                
                requestAnimationFrame(animate);
            }
            
            animate();
            
            setTimeout(() => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
            }, 5000);
        }

        // Grand Surprise
        function grandSurprise() {
            createConfetti();
            loveMeterValue = 100;
            increaseLove();
            
            alert('üéâ SURPRISE! üéâ\n\nYou are the most amazing person, Alice!\nI love you more than all the hearts in the world! üíï');
            
            // Unlock all achievements
            for (let i = 1; i <= 4; i++) {
                unlockAchievement(i);
            }
        }

        // Initialize everything
        window.onload = function() {
            createFloatingHearts();
            initMemoryGame();
            initMatchingPairs();
            
            // Add some default messages
            setTimeout(() => {
                const defaultMessages = [
                    'You make my heart smile! üíï',
                    'Every day with you is Valentine\'s Day! üíñ',
                    'You\'re the reason I believe in love! üíó',
                    'My heart beats for you! üíì'
                ];
                
                defaultMessages.forEach(msg => {
                    const messageWall = document.getElementById('messageWall');
                    const messageDiv = document.createElement('div');
                    messageDiv.className = 'message';
                    messageDiv.innerHTML = `<p>üíå ${msg}</p><small>Alice ‚ù§Ô∏è</small>`;
                    messageWall.appendChild(messageDiv);
                });
            }, 500);
        };
    </script>
</body>
</html>
